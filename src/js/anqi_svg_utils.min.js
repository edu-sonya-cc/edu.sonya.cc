function countScaleMmAndPx(){const{screen:t}=window;const e=[];if(t.deviceXDPI){e.push(t.deviceXDPI);e.push(t.deviceYDPI)}else{const i=document.createElement("div");i.style.cssText="width:1in;height:1in;position:absolute;left:0px;top:0px;z-index:99;visibility:hidden";document.body.appendChild(i);e.push(parseInt(i.offsetWidth.toString()));e.push(parseInt(i.offsetHeight.toString()));document.body.removeChild(i)}const n=e[0];window.mmToPxScale=n/25.4;window.pxToMmScale=25.4/n}countScaleMmAndPx();function createSvgElement(t,e,n){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.innerHTML=t;i.setAttribute("version","1.1");i.setAttribute("xmlns","http://www.w3.org/2000/svg");i.setAttribute("width",`${e}mm`);i.setAttribute("height",`${n}mm`);return{svgElement:i,width:e,height:n}}function createSvgGElement(t,e,n){const i=document.createElementNS("http://www.w3.org/2000/svg","g");i.innerHTML=t;i.setAttribute("width",`${e}mm`);i.setAttribute("height",`${n}mm`);return{gElement:i,width:e,height:n}}function createSvgAndGElement({html:t,width:e,height:n}){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("version","1.1");i.setAttribute("xmlns","http://www.w3.org/2000/svg");i.setAttribute("width",`${e}mm`);i.setAttribute("height",`${n}mm`);const s=createSvgGElement(t,e,n).gElement;i.appendChild(s);return{svgElement:i,gElement:s,width:e,height:n}}function createTopSvgElement(){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("version","1.1");t.setAttribute("width",`${PAGE_WIDTH}mm`);t.setAttribute("height",`${PAGE_HEIGHT}mm`);return t}function appendSvgAndG(t,e,n){const{abs:i,sin:s,cos:o,PI:r}=Math;const{svgElement:m,gElement:c,width:d,height:h}=e;const{left:u,right:g,top:w,bottom:l,transform:f,degree:A}=n;const p="undefined"!==typeof u?u:PAGE_WIDTH-d-g;const a="undefined"!==typeof w?w:PAGE_HEIGHT-h-l;t.appendChild(m);m.setAttribute("x",`${p}mm`);m.setAttribute("y",`${a}mm`);if(!A){return}c.setAttribute("transform",`rotate(${A})`);c.style.transformOrigin="50% 50%";if(A===180||A===-180){return}let E,v,b,$,S,T;if(A<=-90){const P=-90-A;const D=r*P/180;E=d*s(D)+h*o(D);v=d*o(D)+h*s(D);S=-1;T=-1;b=-1;$=1}else if(A<0){const P=-A;const D=r*P/180;E=d*o(D)+h*s(D);v=d*s(D)+h*o(D);S=-1;T=1;b=1;$=1}else if(A<=90){const D=r*A/180;E=d*o(D)+h*s(D);v=d*s(D)+h*o(D);S=-1;T=-1;b=1;$=-1}else if(A<180){const P=A-90;const D=r*P/180;E=d*o(D)+h*s(D);v=d*s(D)+h*o(D);S=-1;T=1;b=1;$=1}const y=E-d;const H=v-h;const x=y*.5;const G=H*.5;const I=x*b;const _=G*$;if(E<0||v<0){console.log({degree:A,cos:o(A),sin:s(A),newWidth:E,newHeight:v,x:p,HALF_DELTA_WIDTH:x,fixValueByRight:"undefined"!==typeof g?2:1,newX:p+x*("undefined"!==typeof g?2:1),y:a,HALF_DELTA_HEIGHT:G,newY:a+G,G_DELTA_X:I,G_DELTA_Y:_})}m.setAttribute("width",`${E}mm`);m.setAttribute("height",`${v}mm`);m.setAttribute("x",`${p+x*S*("undefined"!==typeof g?2:1)}mm`);m.setAttribute("y",`${a+G*T}mm`);c.style.translate=`${I}mm ${_}mm`}